#include "Browser.h"
#include <gtkmm/box.h>
#include <gtkmm/liststore.h>

MyWindow::MyWindow() {
        this->set_default_size(width,height);
	Gtk::Box * box_outer = new Gtk::Box(Gtk::ORIENTATION_VERTICAL,=6);
        this->add(box_outer);
        fSortBy="size"; //size, name, length
        fSortDesc=true; //True, False
	Gtk::Button * browse_button = new Gtk::Button("...");
        browse_button.connect("clicked",browse_clicked);
	Gtk::Button * fdupe_button = Gtk::Button("Find Dupes");
        fdupe_button.connect("clicked",fdupe_clicked);
	Gtk::Box * sort_opt = new Gtk::Box();
	GList * opts;
	opts = glist_append(opts,"size");
	opts = ["size",  "length", "name"];
        for opt in opts: sort_list.append([opt]);
        sort_label = Gtk::Label("Sort by:");
        this->sort_combo = Gtk::ComboBox.new_with_model(sort_list);
        renderer_text = Gtk::CellRendererText();
        this->sort_combo.pack_start(renderer_text, True);
        this->sort_combo.add_attribute(renderer_text, "text", 0);
        this->sort_combo.set_active(0);
        sort_combo.connect("changed",this->on_sort_changed);
        if (fSort_desc) stock_icon=Gtk::STOCK_SORT_DESCENDING;
        else stock_icon=Gtk::STOCK_SORT_ASCENDING;
        fAscButton = new Gtk::Button(None, image=Gtk::Image(stock_icon) );
        this->asc_button.connect("clicked", this->asc_clicked);
        this->connect("destroy", this->on_delete);
        sort_opt.add(sort_label);
        sort_opt.add(sort_combo);
        sort_opt.add(asc_button);
        sort_opt.pack_end(fdupe_button,  False,  False,  0);
        sort_opt.pack_end(browse_button,  False, False, 0 ); 
        box_outer.pack_start(sort_opt, False, True, 0);
        fScrollWin = new Gtk::ScrolledWindow();
        box_outer.pack_start(fScrollWin, True, True, 0);
        populate_icons();
}
